language: objective-c
osx_image: xcode9.1
before_install:
    - gem install cocoapods --no-rdoc --no-ri --no-document --quiet
    - gem install slather --no-rdoc --no-ri --no-document --quiet
    - cd Flat && pod install
script:
    - set -o pipefail && xcodebuild clean -quiet -workspace Flat.xcworkspace -scheme "CIScheme" -sdk iphonesimulator -destination 'platform=iOS Simulator,name=iPhone 8 Plus,OS=11.1' test GCC_INSTRUMENT_PROGRAM_FLOW_ARCS=YES GCC_GENERATE_TEST_COVERAGE_FILES=YES
after_success:
    - cd $TRAVIS_BUILD_DIR && slather
